<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>PiggyBank</title>
</head>
<body>
<div th:insert="fragments/header :: header"></div>
<div th:insert="fragments/header :: header-css"></div>

<form th:method="PATCH" th:object="${users}">

    <label for="username">Имя пользователя</label>
    <input type="text" th:field="*{username}" id="username" placeholder="Введите новое имя пользователя"/>

    <br><br>

    <label for="first_password">Введите новый пароль</label>
    <input type="password" th:field="*{password}" id="first_password"/>

    <br><br>

    <label for="second_password">Повторите пароль</label>
    <input type="password" id="second_password"/>

    <br><br>

    <p id="valid"></p>

    <br>

    <input type="submit" id="submit" value="Сохранить изменения" disabled="disabled"/>

</form>


<div th:insert="fragments/footer :: footer"></div>

<script>
    $(document).ready(function() {
        $("#first_password, #second_password").keyup(validate);

        function validate() {
            var pass1 = $("#first_password").val();
            var pass2 = $("#second_password").val();

            if (pass1 === pass2) {
                $("#valid").text("Пароли совпадают");
                let dis = document.getElementById('submit');
                dis.removeAttribute("disabled");
            }

            else {
                $("#valid").text("Пароли не совпадают");
                let dis = document.getElementById('submit');
                dis.setAttribute("disabled", "disabled")
            }
        }
    });
</script>

</body>
</html>